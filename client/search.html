<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://kit.fontawesome.com/45823de667.js" crossorigin="anonymous"></script>
	<title>Główna</title>
	<link rel="stylesheet" type="text/css" href="./css/index.css">
	<link rel="stylesheet" type="text/css" href="./css/main.css">
</head>
<body>

	<div class="container">

		<div>
			<div class="topBar hideOnMobile">
				<div class="bar">
					<ul class="barList">
						<li><a class="buttonNavi" href="./index.html">Strona główna</a></li>
						<li><a class="buttonNavi hideFromNotUser" href="./historyOrder.html">Historia zamówień</a></li>
					</ul>
					<div class="logo">
						LOGO
					</div>
					<div class="menu">
						<div class="menu--item hideFromNotUser">
							<a href="./cart.html" class="menu--item-none">
								<i class="fa-solid fa-bag-shopping fa-lg"></i>
								<p class="menu--item-option">Koszyk</p>
								<div class="circleCart invisible"><span class="countProducts"></span></div>
							</a>
						</div>
						<div class="menu--item login--triger" id="loginMenu" trigger="#loginModal">
							<a  class="menu--item-none " trigger="#loginModal">
								<i class="fa-solid fa-user fa-lg" trigger="#loginModal"></i>
								<p class="menu--item-option" trigger="#loginModal">Zaloguj</p>
							</a>
						</div>
						<div class="menu--item invisible" onclick="logout()" id="logoutMenu">
							<a href="#" class="menu--item-none">
								<i class="fa-solid fa-user fa-lg"></i>
								<p class="menu--item-option">Wyloguj</p>
							</a>
						</div>
						<div class="menu--item">
							<a id="search" href="#"  class="menu--item-none active">
								<i class="fa-solid fa-magnifying-glass fa-lg"></i>
								<p class="menu--item-option">Szukaj</p>
							</a>
						</div>
					</div>
				</div>
				<div class="search invisible">
					<form action="./search.html" method="GET">
						<a id="searchGo"><span><i class="fa-solid fa-magnifying-glass fa-lg"></i></span></a>
						<input id="searchInput" type="text" name="string" class="searchInput" placeholder='Wpisz, czego szukasz, np. "czarny" lub "półbuty"'>
					</form>
				</div>
			</div>

			<label  class="hideOnScreen">
				<div class="mobileMenuIco" id="menuMobileButton">
					<i class="fa-solid fa-bars fa-xl"></i>
				</div>
			</label>

			<div class="topBarMobile menuMobileHide " id="menuMobile">

				<span class="menuMobile--exit" id="mobileExit"><i class="fa-solid fa-xmark fa-xl"></i></span>

				<div class="barMobile">
					<div class="logoMobile">
						LOGO
					</div>
					<ul class="barListMobile">
						<li><a class="buttonNavi" href="./index.html">Strona główna</a></li>
						<li class="hideFromNotUser"><a class="buttonNavi " href="./historyOrder.html">Historia zamówień</a></li>
					</ul>
					

					<div class="search">
						<form>
							<span><i class="fa-solid fa-magnifying-glass fa-lg"></i></span>
							<input type="text" name="search" class="searchInput" placeholder='Wpisz, czego szukasz, np. "buty na jesień" lub "obuwie damskie'>
						</form>
					</div>

					<div class="menu-mobile">
						<div class="menu--item-mobile">
							<a href="./cart.html" class="menu--item-none hideFromNotUser">
								<i class="fa-solid fa-bag-shopping fa-lg"></i>
								<p class="menu--item-option">Koszyk</p>
							</a>
						</div>
						<div class="menu--item-mobile " id="loginMenuMobile">
							<i class="fa-solid fa-user fa-lg"></i>
							<p class="menu--item-option">Zaloguj</p>
						</div>
						<div class="menu--item-mobile invisible" id="logoutMenuMobile">
							<i class="fa-solid fa-user fa-lg"></i>
							<p class="menu--item-option">Wyloguj</p>
						</div>
						<div class="menu--item-mobile">
							<i class="fa-solid fa-magnifying-glass fa-lg"></i>
							<p class="menu--item-option">Szukaj</p>
						</div>
					</div>
				</div>
			</div>

		</div>
		<!-- modal -->

		<!-- <div class="modal invisible" id="content4">
			<div class="modal--body">
				<div class="modal--image">
					<img src="./image/adidasSzary.jpg">
				</div>
				<div class="modal--desc">
					<span class="modal--desc-exit"><i class="fa-solid fa-xmark"></i></span>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
					quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
					</p>

					<ul class="ulOffer">
						<li class="liOffer"><b>Marka</b>  ADIDAS</li>
						<li class="liOffer"><b>Model</b>  PUREMOTION SE GX0607</li>
						<li class="liOffer"><b>Kod produktu</b>  5904248795870</li>
						<li class="liOffer"><b>Kategoria</b>  Obuwie sportowe</li>
						<li class="liOffer"><b>Kolor</b>  Biały</li>
						<li class="liOffer"><b>Sezon</b>  Cały rok</li>
					</ul>

					<p>Cena: 349.99 Zł</p>
					<a href="#" class="buttonBuy">Dodaj do koszyka</a>
				</div>
			</div>
		</div> -->


		<div class="modal invisible" id="loginModal">
			<div class="modal--body">
				<div class="loginDiv">
					<span class="modal--desc-exit"><i class="fa-solid fa-xmark"></i></span>
					
						<div class="bodyModalLogin">
							<div class="space">
								<input type="text" name="login" id="login" required>
								<label for="login">Login</label>
							</div>
							<div class="space">
								<input type="password" name="password" id="password" required>
								<label for="password">password</label>
							</div>
						</div>
						<button class="buttonBuy" id="loginButton" onclick="login.login()">Zaloguj</button>
					
				</div>
			</div>
		</div>

		<!-- modal end -->

		<div class="content" id="productsContent">

			<div id="empty">
				<h3>Brak wyników</h3>
			</div>
			<!-- <div class="product">
				<div class="quickView">
					<a href="./produkt.html" class="imgA">
						
						<img class="productImage" src="./image/img2.jpg">

					</a>
					<a href="#0" trigger="#content2" class="product--triger invisibleOpacity">Podgląd</a>
				</div>
				<div class="productTitle">
					<p>269,99 ZŁ</p>
					<p class="productDesc">Obuwie sportowe prandi MP40-21035Y</p>
				</div>
			</div>
			<div class="product">
				<div class="quickView">
					<a href="./produktAdidas.html" class="imgA">
						<img class="productImage" src="./image/image.jpg">
					</a>
					<a href="#0" trigger="#content" class="product--triger invisibleOpacity">Podgląd</a>
				</div>
				<div class="productTitle">
					<p>249,99 ZŁ</p>
					<p class="productDesc">Obuwie sportowe ADIDAS STRUTTER GX0670 Biały</p>
				</div>
			</div>
			<div class="product">
				<div class="quickView">
					<a href="./produktAdidasCzarny.html" class="imgA">
						<img class="productImage" src="./image/adidasCzarny.jpg">
					</a>
					<a href="#0" trigger="#content3" class="product--triger invisibleOpacity">Podgląd</a>
				</div>
				<div class="productTitle">
					<p>329,99 ZŁ</p>
					<p class="productDesc">Obuwie sportowe ADIDAS PUREMOTION SE GX0607</p>
				</div>
			</div>
			<div class="product">
				<div class="quickView">
					<a href="./produktAdidasSzary.html" class="imgA">
						<img class="productImage" src="./image/adidasSzary.jpg">
					</a>
					<a href="#0" trigger="#content4" class="product--triger invisibleOpacity">Podgląd</a>
				</div>
				<div class="productTitle">
					<p>349,99 ZŁ</p>
					<p class="productDesc">Obuwie sportowe ADIDAS QUESTAR GZ0624</p>
				</div>
			</div> -->

		</div>
	</div>

	<div class="footer">
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
		consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
		cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
	</div>
	
	<script type="text/javascript" src="./js/modal.js"></script>
	<script type="text/javascript" src="./js/productsFetch.js"></script>
	<script type="text/javascript" src="./js/searchFetch.js"></script>
	<script type="text/javascript" src="./js/cookie.js"></script>
	<script type="text/javascript" src="./js/auth.js"></script>
	<script type="text/javascript" src="./js/main.js"></script>
	<script type="text/javascript">
		let string = window.location.href.split('?string=');
		let search = new Search();
		let modal = new Modal('.product--triger');

		search.search(string[1].replace('+', ' '), products => {
			console.log(products)
			if(products.length != 0)	document.querySelector('#empty').classList.toggle('invisible')
			

			for (let product of products){

		let image = (product.images == null) ?  'null.png' : product.images.split(',')[0]

		document.querySelector('#productsContent').innerHTML +=`
		<div class="product">
			<div class="quickView">
				<a href="./produkt.html?id=${product.id}" class="imgA">
					<img class="productImage" src="./image/${image}">
				</a>
				<a href="#0" trigger="#modal${product.id}" class="product--triger invisibleOpacity">Podgląd</a>
			</div>
			<div class="productTitle">
				<p>${product.price} ZŁ</p>
				<p class="productDesc">${product.name}</p>
			</div>
		</div>
		`
		let offer = {
			"model":product.model,
			"nazwa":product.name,
			"buty":product.sex,
			"styl":product.style,
			"marka": product.brand
		}
		let keys = Object.keys(offer)
		let ulOffer = "";
		for(let i=0; i<keys.length;i++){
			ulOffer +=`
				<li class="liOffer"><b>${keys[i]}</b>  ${offer[keys[i]]}</li>
			`
		}
		document.querySelector('body').innerHTML +=`
			<div class="modal invisible" id="modal${product.id}">
				<div class="modal--body">
					<div class="modal--image">
						<img src="./image/${image}">
					</div>
					<div class="modal--desc">
						<span class="modal--desc-exit"><i class="fa-solid fa-xmark"></i></span>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
						tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
						quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
						</p>
						<ul class="ulOffer">
							${ulOffer}
						</ul>
						<p>Cena: ${product.price} Zł</p>
						<a href="javascript:console.log(cookie.addToCookie('order',
						${product.id}, '|'
						))" onClick="modal.modalHide();alert('Dodano do koszyka')" class="buttonBuy">Dodaj do koszyka</a>
					</div>
				</div>
			</div>
		`
		productTriger()
		searchShow()
		searchStart()
		menuMobile()
		modal.init();
		modalLogin.init();
	}
		})
	</script>
</body>
</html>