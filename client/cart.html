<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://kit.fontawesome.com/45823de667.js" crossorigin="anonymous"></script>
	<title>Cart</title>
	<link rel="stylesheet" type="text/css" href="./css/index.css">
	<link rel="stylesheet" type="text/css" href="./css/cart.css">
</head>
<body>
<div class="container">

	<!-- modal -->

		<div class="modal invisible" id="contentModal">
			<div class="modal--body">
				<div class="modal--image">
					<img src="./image/image.jpg">
				</div>
				<div class="modal--desc">
					<span class="modal--desc-exit"><i class="fa-solid fa-xmark"></i></span>
					<p>Czy chcesz usunąć z koszyka ten produkt ?</p>
					<div>
						<a href="#" class="buttonBuy">Tak</a>
						<a href="#" class="buttonBuy">nie</a>
					</div>
				</div>
			</div>
		</div>

		<!-- modal end -->


		<div>
			<div class="topBar hideOnMobile">
				<div class="bar">
					<ul class="barList">
						<li><a class="buttonNavi" href="./index.html">Strona główna</a></li>
						<li><a class="buttonNavi" href="./historyOrder.html">Historia zamówień</a></li>
					</ul>
					<div class="logo">
						LOGO
					</div>
					<div class="menu">
						<div class="menu--item">
							<a href="./cart.html" class="menu--item-none active">
								<i class="fa-solid fa-bag-shopping fa-lg"></i>
								<p class="menu--item-option">Koszyk</p>
							</a>
						</div>
						<div class="menu--item invisible">
							<i class="fa-solid fa-user fa-lg"></i>
							<p class="menu--item-option">Zaloguj</p>
						</div>
						<div class="menu--item">
							<a href="#" id="search" class="menu--item-none">
								<i class="fa-solid fa-magnifying-glass fa-lg"></i>
								<p class="menu--item-option">Szukaj</p>
							</a>
						</div>
					</div>
				</div>
				<div class="search invisible">
					<form>
						<span><i class="fa-solid fa-magnifying-glass fa-lg"></i></span>
						<input type="text" name="search" class="searchInput" placeholder='Wpisz, czego szukasz, np. "buty na jesień" lub "obuwie damskie'>
					</form>
				</div>
			</div>

			<label id="menuMobileButton" class="hideOnScreen">
				<div class="mobileMenuIco">
					<i class="fa-solid fa-bars fa-xl"></i>
				</div>
			</label>

			<div class="topBarMobile menuMobileHide " id="menuMobile">

				<span class="menuMobile--exit" id="mobileExit"><i class="fa-solid fa-xmark fa-xl"></i></span>

				<div class="barMobile">
					<div class="logoMobile">
						LOGO
					</div>
					<ul class="barListMobile">
						<li><a class="buttonNavi active" href="./index.html">Strona główna</a></li>
						<li><a class="buttonNavi" href="./historyOrder.html">Historia zamówień</a></li>
					</ul>
					<div class="menu">
						<div class="menu--item-mobile">
							<a href="./cart.html" class="menu--item-none active">
								<i class="fa-solid fa-bag-shopping fa-lg"></i>
								<p class="menu--item-option">Koszyk</p>
							</a>
						</div>
						<div class="menu--item-mobile invisible">
							<i class="fa-solid fa-user fa-lg"></i>
							<p class="menu--item-option">Zaloguj</p>
						</div>
						<div class="menu--item-mobile invisible">
							<i class="fa-solid fa-magnifying-glass fa-lg"></i>
							<p class="menu--item-option">Szukaj</p>
						</div>
					</div>

					<div class="search">
						<form>
							<span><i class="fa-solid fa-magnifying-glass fa-lg"></i></span>
							<input type="text" name="search" class="searchInput" placeholder='Wpisz, czego szukasz, np. "buty na jesień" lub "obuwie damskie'>
						</form>
					</div>
				</div>
			</div>

		</div>

		<div class="content">

			<div class="products" id="productsCart">

				<!-- <div class="product">
					<div class="productContent">
						<img class="productImage" src="./image/img2.jpg">
					</div>
					<div class="productContent">
						<p>ADIDAS</p>
						<p>Obuwie sportowe ADIDAS STRUTTER GX0670 Biały</p>
					</div>
					<div class="productContent">
						<p>Ilość</p>
						<p>2 szt.</p>
					</div>
					<div class="productContent">
						<p>Cena łączna:</p>
						<p>499,98 zł</p>
					</div>
					<div class="productContent">
						<i class="fa-solid fa-trash-can modal--triger" trigger="#contentModal"></i>
					</div>
				</div>	 -->	

			</div>
			<div class="overview">
				<h1>Podsumowanie</h1>
				<div class="boxLine">
					<p class="boxDesc">Wartość produktów</p>
					<span class="boxPrice"><span id="priceOrder">0</span> zł</span>
				</div>
				<div class="boxLine">
					<p class="boxDesc">Koszt dostawy</p>
					<span class="boxPrice"><span id="priceShipment">0</span> zł</span>
				</div>
				<div class="boxLine">
					<p class="boxDesc">Suma</p>
					<span class="boxPrice"><span id="priceTotal">0</span> zł</span>
				</div>

				<a class="buttonBuy" href="./purchase.html">Przejdź do zapłaty</a>
			</div>

		</div>
	</div>

	<div class="footer">
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
		consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
		cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
		proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
	</div>
	<script type="text/javascript" src="./js/main.js"></script>

	<script type="text/javascript" src="./js/modal.js"></script>
	<script type="text/javascript" src="./js/cookie.js"></script>
	<script type="text/javascript" src="./js/productsFetch.js"></script>
	<script type="text/javascript">
		let modal = new Modal('.modal--triger');
		let cookie = new Cookies();
		let product = new Product();
		modal.init();
		window.priceTotal = 0;
		window.count = 0;

		let orderCookie = cookie.getCookie('order').split('|');

		for(let id of orderCookie){

			product.one(id, product => {
				window.priceTotal += product.price
				window.count++
				document.querySelector("#priceOrder").innerHTML = window.priceTotal;
				document.querySelector("#priceShipment").innerHTML = window.count * 10;
				document.querySelector("#priceTotal").innerHTML = window.count * 10 + window.priceTotal;

				document.querySelector("#productsCart").innerHTML +=`
					<div class="product">
						<div class="productContent">
							<img class="productImage" src="./image/${product.images.split(',')[0]}">
						</div>
						<div class="productContent">
							<p>${product.brand}</p>
							<p>${product.name}</p>
						</div>
						<div class="productContent">
							<p>Ilość</p>
							<p>1 szt.</p>
						</div>
						<div class="productContent">
							<p>Cena łączna:</p>
							<p>${product.price} zł</p>
						</div>
						<div class="productContent">
							<i class="fa-solid fa-trash-can modal--triger" trigger="#contentModal"></i>
						</div>
					</div>
				`
			})
		}

	</script>
</body>
</html>